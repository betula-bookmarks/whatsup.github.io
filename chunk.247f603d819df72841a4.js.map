{"version":3,"sources":["webpack:///./src/editor/factors.tsx","webpack:///./src/editor/editor.tsx","webpack:///./src/editor/const.tsx"],"names":["Branch","BRANCH","factor","View","EDITABLE","CHANGE_EDITABLE","Editor","fractal","newBlock","data","JSON","parse","localStorage","getItem","Root","Editable","fraction","delegation","Target","use","NameAndTag","Style","Tree","Data","stringify","setItem","a","_Container","_ViewContent","_Tools","_Tree","styled","div","_View","_Style","_NameAndTag"],"mappings":"2FAAA,4IAGYA,EAHZ,S,SAGYA,O,eAAAA,I,iBAAAA,I,eAAAA,I,eAAAA,I,4BAAAA,M,KAQL,IAAMC,EAASC,YAAOF,EAAOG,MACvBC,EAAWF,cACXG,EAAkBH,e,g+GCN/B,IAGaI,EAASC,YAAO,4CAAC,qIACC,+BADD,OAQ1B,OAR0B,SAClBC,EADkB,EAClBA,SAEFC,EAAOC,KAAKC,MAAMC,aAAaC,QCbhB,iBDQrB,+mBAOMC,EAAON,EAASC,GAChBM,EAAWC,YAASF,EAAM,CAAEG,YAAY,IAE9C,oBAAOb,YAASW,IAAhB,WAR0B,OAS1B,2BAAOV,aAAgB,SAACa,GAAD,OAAmBH,EAASI,IAAID,OAAvD,WAT0B,OA+B1B,OApBMf,EAAOI,YAAO,4CAAC,6FACjB,2BAAON,YAAOD,IAAOG,OAArB,WADiB,OAEJ,OAFI,SAEEW,EAFF,iEAAD,sDAKdM,EAAab,YAAO,4CAAC,6FACvB,2BAAON,YAAOD,IAAOoB,aAArB,WADuB,OAEJ,2BAAOL,GAAP,WAFI,OAEV,OAFU,SAEV,KAFU,iEAAD,sDAKpBM,EAAQd,YAAO,4CAAC,6FAClB,2BAAON,YAAOD,IAAOqB,QAArB,WADkB,OAEC,2BAAON,GAAP,WAFD,OAEL,OAFK,SAEL,KAFK,iEAAD,sDAKfO,EAAOf,YAAO,4CAAC,6FACjB,2BAAON,YAAOD,IAAOsB,OAArB,WADiB,OAEJ,OAFI,SAEER,EAFF,iEAAD,sDAKpB,oBAAOP,YAAO,4CAAC,6FACX,2BAAON,YAAOD,IAAOuB,OAArB,WADW,OAI8C,OAJ9C,KAIDX,aAJC,KCzCM,eDyCN,KAI+BF,KAAe,oBAAOI,GAAP,WAJ9C,OAIP,OAJO,oBAIoCU,UAJpC,0BAIP,KAAmBC,QAAnB,qBAJO,mEAAD,uDAAd,YA/B0B,QA2CK,OA3CL,OAAAC,EAAA,KAyCjBC,EAzCiB,OAAAD,EAAA,KA0Cb,EA1Ca,OAAAA,EAAA,KA2CTE,EAAc,oBAAOzB,GAAP,YA3CL,QA8CI,OA9CJ,2HAAAuB,EAAA,MA6CbG,EA7Ca,QAAAH,EAAA,MA8CT,EAAa,oBAAON,GAAP,aA9CJ,QA+CD,OA/CC,2EAAAM,EAAA,MA+CT,EAAQ,oBAAOL,GAAP,aA/CC,QAgDF,OAhDE,2EAAAK,EAAA,MAgDTI,EAAO,oBAAOR,GAAP,aAhDE,QAwCtB,OAxCsB,gJAwCtB,oDAxCsB,oEAAD,sDAuDvBK,EAAaI,IAAOC,IAAV,KAOVC,EAAQF,IAAOC,IAAV,KAKLH,EAASE,IAAOC,IAAV,KAONJ,EAAeG,IAAOC,IAAV,KAaZE,EAASH,IAAOC,IAAV,KAKNG,EAAcJ,IAAOC,IAAV,KAIXF,EAAQC,IAAOC,IAAV","file":"chunk.247f603d819df72841a4.js","sourcesContent":["import { factor, Fraction } from '@fract/core'\nimport { Block } from './block'\n\nexport enum Branch {\n    View,\n    Style,\n    Tree,\n    Data,\n    NameAndTag,\n}\n\nexport const BRANCH = factor(Branch.View)\nexport const EDITABLE = factor<Fraction<{ Target: Block }>>()\nexport const CHANGE_EDITABLE = factor<(target: any) => void>()\n","import React from 'react'\nimport styled from 'styled-components'\nimport { fractal, fraction } from '@fract/core'\nimport { BRANCH, Branch, EDITABLE, CHANGE_EDITABLE } from './factors'\nimport { STORE_KEY } from './const'\nimport { BlockData, Block } from './block'\n\nconst DEFAULT =\n    '{\"tag\":\"div\",\"width\":\"auto\",\"height\":\"auto\",\"border\":\"none\",\"borderRadius\":\"none\",\"background\":\"unset\",\"children\":[{\"tag\":\"div\",\"width\":\"auto\",\"height\":\"100px\",\"border\":\"none\",\"borderRadius\":\"none\",\"background\":\"LightCyan\",\"children\":[]},{\"tag\":\"div\",\"width\":\"auto\",\"height\":\"50px\",\"border\":\"none\",\"borderRadius\":\"40px\",\"background\":\"LightGreen\",\"children\":[]},{\"tag\":\"div\",\"width\":\"auto\",\"height\":\"400px\",\"border\":\"none\",\"borderRadius\":\"none\",\"background\":\"Goldenrod\",\"children\":[{\"tag\":\"div\",\"width\":\"300px\",\"height\":\"300px\",\"border\":\"3px red solid\",\"borderRadius\":\"50%\",\"background\":\"MediumPurple\",\"children\":[]}]}]}'\n\nexport const Editor = fractal(async function* _HtmlEditor() {\n    const { newBlock } = await import('./block')\n\n    const data = JSON.parse(localStorage.getItem(STORE_KEY) || DEFAULT) as BlockData\n\n    const Root = newBlock(data)\n    const Editable = fraction(Root, { delegation: false })\n\n    yield* EDITABLE(Editable)\n    yield* CHANGE_EDITABLE((Target: Block) => Editable.use(Target))\n\n    const View = fractal(async function* _View() {\n        yield* BRANCH(Branch.View)\n        while (true) yield Root\n    })\n\n    const NameAndTag = fractal(async function* _NameAndTag() {\n        yield* BRANCH(Branch.NameAndTag)\n        while (true) yield yield* Editable\n    })\n\n    const Style = fractal(async function* _Style() {\n        yield* BRANCH(Branch.Style)\n        while (true) yield yield* Editable\n    })\n\n    const Tree = fractal(async function* _Edit() {\n        yield* BRANCH(Branch.Tree)\n        while (true) yield Root\n    })\n\n    yield* fractal(async function* _AutoSyncWithLocalStore() {\n        yield* BRANCH(Branch.Data)\n\n        while (true) {\n            yield localStorage.setItem(STORE_KEY, JSON.stringify(yield* Root))\n        }\n    })\n\n    while (true) {\n        yield (\n            <_Container>\n                <_View>\n                    <_ViewContent>{yield* View}</_ViewContent>\n                </_View>\n                <_Tools>\n                    <_NameAndTag>{yield* NameAndTag}</_NameAndTag>\n                    <_Style>{yield* Style}</_Style>\n                    <_Tree>{yield* Tree}</_Tree>\n                </_Tools>\n            </_Container>\n        )\n    }\n})\n\nconst _Container = styled.div`\n    font: 14px 'SF Mono', Monaco, Menlo, Courier, monospace;\n    display: flex;\n    height: 100vh;\n    background-color: #37474f;\n    gap: 1px;\n`\nconst _View = styled.div`\n    flex: 1;\n    padding: 20px;\n    background-color: #263238;\n`\nconst _Tools = styled.div`\n    flex: 1;\n    max-width: 350px;\n    display: flex;\n    flex-direction: column;\n    gap: 1px;\n`\nconst _ViewContent = styled.div`\n    overflow: scroll;\n    width: 100%;\n    height: 100%;\n    --grad-color: #495962;\n    background-image: linear-gradient(45deg, var(--grad-color) 25%, transparent 25%),\n        linear-gradient(-45deg, var(--grad-color) 25%, transparent 25%),\n        linear-gradient(45deg, transparent 75%, var(--grad-color) 75%),\n        linear-gradient(-45deg, transparent 75%, var(--grad-color) 75%);\n    background-size: 20px 20px;\n    background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n    background-color: #37474f;\n`\nconst _Style = styled.div`\n    background-color: #263238;\n    overflow: scroll;\n    flex: 1;\n`\nconst _NameAndTag = styled.div`\n    background-color: #263238;\n    overflow: scroll;\n`\nconst _Tree = styled.div`\n    padding-left: 3px;\n    padding-top: 2px;\n    background-color: #263238;\n    overflow: scroll;\n    flex: 0 0 400px;\n`\n","export const STORE_KEY = 'EDITOR_STORE'\n"],"sourceRoot":""}