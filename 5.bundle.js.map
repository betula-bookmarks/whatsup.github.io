{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.concat.js","webpack:///./node_modules/core-js/modules/es.array.includes.js","webpack:///./src/antistress/sounds sync ^\\.\\/.*$","webpack:///./src/antistress/sounds/fill.mp3","webpack:///./src/antistress/sounds/fill.ogg","webpack:///./src/antistress/sounds/split.mp3","webpack:///./src/antistress/sounds/split.ogg","webpack:///./src/antistress/sounds.tsx","webpack:///./src/antistress/circle.tsx"],"names":["$","fails","isArray","isObject","toObject","toLength","createProperty","arraySpeciesCreate","arrayMethodHasSpeciesSupport","wellKnownSymbol","V8_VERSION","IS_CONCAT_SPREADABLE","IS_CONCAT_SPREADABLE_SUPPORT","array","concat","SPECIES_SUPPORT","isConcatSpreadable","O","spreadable","undefined","target","proto","forced","arg","i","k","length","len","E","this","A","n","arguments","TypeError","$includes","includes","addToUnscopables","arrayMethodUsesToLength","ACCESSORS","1","el","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","playSound","name","audio","Audio","ext","canPlayType","src","require","default","preload","play","playFillSound","playSplitSound","newCircle","data","Tree","fraction","Array","c","fractal","MODE","Mode","Data","Jsx","workInDataMode","workInJsxMode","tree","children","Child","push","key","Math","random","toString","CURRENT_COLOR","CurrentColor","convertTreeToColorAndChildren","color","splitTimerId","handlers","createSplitFillHandlers","setTimeout","use","Color","Default","exec","clearTimeout","Container","None","split","fill","IS_TOUCH","stopPropagation","styled","div","props"],"mappings":"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","file":"5.bundle.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  concat: function concat(arg) { // eslint-disable-line no-unused-vars\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: !USES_TO_LENGTH }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","var map = {\n\t\"./fill.mp3\": 163,\n\t\"./fill.ogg\": 164,\n\t\"./split.mp3\": 165,\n\t\"./split.ogg\": 166\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 162;","export default __webpack_public_path__ + \"e8036e0e627212982e6529a686bbcf87.mp3\";","export default __webpack_public_path__ + \"6dddc72a0451fc4b28378a120265411e.ogg\";","export default __webpack_public_path__ + \"27f3c4c220918d3ed161fca1043fc4fa.mp3\";","export default __webpack_public_path__ + \"d75f2df3cd4d61fb0b468a95dc87a154.ogg\";","function playSound(name: string) {\n    const audio = new Audio()\n    const ext = ['probably', 'maybe'].includes(audio.canPlayType('audio/mpeg')) ? 'mp3' : 'ogg'\n    const src = require(`./sounds/${name}.${ext}`).default\n    audio.preload = 'auto'\n    audio.src = src\n    audio.play()\n}\n\nexport function playFillSound() {\n    playSound('fill')\n}\n\nexport function playSplitSound() {\n    playSound('split')\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { fractal, fraction, exec, Fractal, Fraction } from '@fract/core'\nimport { IS_TOUCH, Color } from './const'\nimport { playSplitSound, playFillSound } from './sounds'\nimport { CURRENT_COLOR, MODE, Mode } from './factors'\nimport { Handlers, TreeData } from './typings'\n\ntype Tree = Fraction<TreeData | Fractal<TreeData | JSX.Element>[]>\n\nexport function newCircle(data: TreeData): Fractal<TreeData | JSX.Element> {\n    const Tree: Tree = fraction(Array.isArray(data) ? data.map((c) => newCircle(c)) : data)\n\n    return fractal<TreeData | JSX.Element>(async function* _Circle(): AsyncGenerator<TreeData | JSX.Element> {\n        switch (yield* MODE) {\n            case Mode.Data:\n                yield* workInDataMode(Tree)\n                break\n            case Mode.Jsx:\n                yield* workInJsxMode(Tree)\n                break\n        }\n    })\n}\n\nasync function* workInDataMode(Tree: Tree): AsyncGenerator<TreeData> {\n    while (true) {\n        const tree = yield* Tree\n\n        if (Array.isArray(tree)) {\n            const children = [] as TreeData[]\n\n            for (const Child of tree) {\n                children.push(yield* Child as Fractal<Color | TreeData[]>)\n            }\n\n            yield children\n        } else {\n            yield tree\n        }\n    }\n}\n\nasync function* workInJsxMode(Tree: Tree): AsyncGenerator<JSX.Element> {\n    const key = (~~(Math.random() * 1e8)).toString(16)\n    const CurrentColor = yield* CURRENT_COLOR\n\n    while (true) {\n        const { color, children } = yield* convertTreeToColorAndChildren(Tree)\n\n        let splitTimerId = 0\n\n        const split = () => {\n            splitTimerId = setTimeout(() => {\n                Tree.use(children.length ? Color.Default : [newCircle(color), newCircle(color), newCircle(color)])\n                playSplitSound()\n                splitTimerId = 0\n            }, 300)\n        }\n        const fill = () => {\n            if (splitTimerId && !children.length) {\n                exec(async function* () {\n                    Tree.use(yield* CurrentColor)\n                    playFillSound()\n                })\n            }\n            clearTimeout(splitTimerId)\n        }\n        const handlers = createSplitFillHandlers(split, fill)\n\n        yield (\n            <Container key={key} color={color} {...handlers}>\n                {children}\n            </Container>\n        )\n    }\n}\n\nasync function* convertTreeToColorAndChildren(\n    Tree: Tree\n): AsyncGenerator<any, { color: Color; children: JSX.Element[] }> {\n    const tree = yield* Tree\n\n    if (Array.isArray(tree)) {\n        const children = [] as JSX.Element[]\n\n        for (const Child of tree) {\n            children.push(yield* Child as Fractal<JSX.Element>)\n        }\n\n        return { color: Color.None, children }\n    }\n    return { color: tree, children: [] as JSX.Element[] }\n}\n\nfunction createSplitFillHandlers(split: () => void, fill: () => void): Handlers {\n    return {\n        [IS_TOUCH ? 'onTouchStart' : 'onMouseDown'](e: React.MouseEvent | React.TouchEvent) {\n            e.stopPropagation()\n            split()\n        },\n        [IS_TOUCH ? 'onTouchEnd' : 'onMouseUp'](e: React.MouseEvent | React.TouchEvent) {\n            e.stopPropagation()\n            fill()\n        },\n    }\n}\n\nconst Container = styled.div<{ color: Color }>`\n    border-radius: 50%;\n    background-color: ${(props) => props.color};\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    position: relative;\n    cursor: pointer;\n    top: 4%;\n\n    > div {\n        width: 46%;\n        height: 46%;\n        margin: 2%;\n\n        :nth-child(1) {\n            margin-left: 26%;\n            margin-right: 26%;\n            top: -3.85%;\n        }\n        :nth-child(2),\n        :nth-child(3) {\n            top: -10.55%;\n        }\n    }\n`\n"],"sourceRoot":""}